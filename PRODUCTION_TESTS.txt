# ErrorWatch Production - Test Checklist

## Domain URLs
- Dashboard: https://error-watch.tilvest.com
- API: https://api.error-watch.tilvest.com
- Kuma: https://kuma.tilvest.com

## Manual Browser Tests

### 1. Login Flow
1. Open https://error-watch.tilvest.com/login
2. Try to sign in with invalid credentials → should show "Invalid email or password"
3. Sign up with new email → should redirect to /onboarding or /dashboard

### 2. Session Cookie
- After login, check DevTools → Application → Cookies
- Should see `better-auth.session_token` cookie set on `.error-watch.tilvest.com`

### 3. Dashboard
- Navigate to https://error-watch.tilvest.com/dashboard
- Should load without 401/403 errors

### 4. SSE Connection
- Open browser console
- Should NOT see CORS errors for /sse/*
- SSE should connect successfully

## API Tests (curl)

### Test Auth
```bash
# Sign-in
curl -X POST "https://api.error-watch.tilvest.com/api/auth/sign-in/email" \
  -H "Content-Type: application/json" \
  -H "Origin: https://error-watch.tilvest.com" \
  -d '{"email":"test@test.com","password":"test"}'

# Expected: {"code":"INVALID_EMAIL_OR_PASSWORD",...}
```

### Test SSE
```bash
# Without auth (should 401)
curl -I "https://api.error-watch.tilvest.com/sse/test" \
  -H "Origin: https://error-watch.tilvest.com"

# Expected: HTTP/2 401 with CORS headers
```

## Issues Fixed
- Cookie domain set to `.tilvest.com` for cross-subdomain auth
- CORS headers added for SSE endpoints
- Caddy SSE proxy fixed (removed header manipulation)
- Trusted origins include both dashboard and API domains
